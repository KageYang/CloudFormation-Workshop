
Metadata:
  AWS::CloudFormation::Interface:
    ParameterGroups:
      -
        Label:
          default: "EC2 Configuration"
        Parameters:
          - InstanceType
          - KeyName
          - SubnetID
          - SecurityGroupID
Parameters:
  KeyName:
    Default: Name of an existing EC2 KeyPair to enable SSH access to the instance
    Type: 'AWS::EC2::KeyPair::KeyName'
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
  InstanceType:
    Description: WebServer EC2 instance type
    Type: String
    Default: t2.micro
  SubnetID:
    Type: 'AWS::EC2::Subnet::Id'
  SecurityGroupID:
    Type: 'AWS::EC2::SecurityGroup::Id'
Resources:
  myEC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      KeyName: !Ref KeyName
      ImageId: ami-0f5761c546ea1265a
      InstanceType: !Ref InstanceType
      SubnetId: !Ref SubnetID
      Monitoring: true
      SecurityGroupIds:
        - !Ref SecurityGroupID
      UserData: !Base64 
      Tags:
        - Key: department
          Value: IT
